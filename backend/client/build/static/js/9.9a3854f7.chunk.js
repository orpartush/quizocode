(this.webpackJsonpquizocode=this.webpackJsonpquizocode||[]).push([[9],{153:function(e,t){},165:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(3),s=a(15),l=a(1),o=a.n(l),u=a(4),i={load:function(e){return JSON.parse(localStorage.getItem(e))},store:function(e,t){localStorage.setItem(e,JSON.stringify(t))},remove:function(e){localStorage.removeItem(e)}};var m=a(24),f=a(11),g=a(74),p=a(10),b=a(17),E=a(80),O=a(75),j=a.n(O),v=a(77),d=a.n(v);var x=function(e){var t=e.userID,a=Object(l.useContext)(b.a).getUserByID,n=Object(l.useState)({}),u=Object(s.a)(n,2),i=u[0],m=u[1];return Object(l.useEffect)((function(){var e=!0;return function(){var n=Object(r.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(t);case 2:r=n.sent,e&&m(r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()(),function(){return e=!1}}),[t,a]),o.a.createElement(p.b,{to:"/profile/"+i._id,className:"user-info-preview flex"},o.a.createElement("img",{src:i.imgUrl,alt:"Author"}),o.a.createElement("section",{className:"name-container flex flex-column"},o.a.createElement("div",{className:"name"},i.name),o.a.createElement("section",{className:"user-states flex"},o.a.createElement("div",{className:"points"},o.a.createElement("img",{src:j.a,alt:"Points"}),o.a.createElement("span",null,i.points)),o.a.createElement("div",{className:"likes"},o.a.createElement("img",{src:d.a,alt:"Likes"}),o.a.createElement("span",null,i.likes)))))},h=a(83);var N,w=function(e){var t=e.questions,a=e.category,n=e.onProgress,u=e.onFinish,m=Object(l.useContext)(b.a),O=m.getUserByID,j=m.updateUser,v=Object(l.useState)(0),d=Object(s.a)(v,2),N=d[0],w=d[1],y=Object(l.useState)("Loading your next question..."),k=Object(s.a)(y,2),S=k[0],q=k[1],C=Object(l.useState)(""),I=Object(s.a)(C,2),U=I[0],z=I[1],L=Object(l.useState)([]),Q=Object(s.a)(L,2),D=Q[0],A=Q[1],P=Object(l.useState)(""),J=Object(s.a)(P,2),B=J[0],F=J[1],M=Object(l.useState)([]),T=Object(s.a)(M,2),W=T[0],Y=T[1],G=Object(l.useState)(""),R=Object(s.a)(G,2),_=R[0],H=R[1],K=Object(l.useState)(!1),V=Object(s.a)(K,2),X=V[0],Z=V[1];Object(l.useEffect)((function(){!function(){var e,t;if(a){var n=a.toLowerCase();w(null!==(e=i.load("".concat(n,"CurrQuestionIdx")))&&void 0!==e?e:N),Y(null!==(t=i.load("".concat(n,"Answers")))&&void 0!==t?t:W)}}()}),[a]);var $=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==B){e.next=2;break}return e.abrupt("return");case 2:if(!X){e.next=6;break}return e.next=5,ee();case 5:Z(!1);case 6:n(N),Y([].concat(Object(g.a)(W),[B])),w(N+1),F("");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(_);case 2:return t=e.sent,a=Object(f.a)(Object(f.a)({},t),{},{likes:t.likes+1}),e.next=6,j(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){if(N===t.length&&0!==N){var e=a.toLowerCase();return i.store(e+"Answers",W),void u()}if(t.length>0){var n=t[N];q(n.question),z(n.code),A(n.ansOptions),H(n.authorID)}!function(){var e=a.toLowerCase();i.store(e+"Answers",W),N===t.length&&0!==N||i.store(e+"CurrQuestionIdx",N)}()}),[W,t,N,u,a]),o.a.createElement("div",{className:"quiz"},o.a.createElement("form",{className:"flex flex-column justify-center",onSubmit:function(e){return e.preventDefault()}},o.a.createElement("section",{className:"question-container"},o.a.createElement("section",{className:"question flex align-center space-between"},o.a.createElement("span",null,"Q#",N+1,": ",S),o.a.createElement("button",{className:"like-btn",title:"Like",onClick:function(){return Z(!X)}},X?o.a.createElement(h.c,null):o.a.createElement(h.b,null))),U&&o.a.createElement("section",{className:"question-code"},o.a.createElement(E.a,{code:U}))),o.a.createElement("section",{className:"options flex flex-column"},D.map((function(e,t){return o.a.createElement("label",{className:"flex align-center",key:t,onClick:function(){F(t)}},o.a.createElement("input",{type:"checkbox",name:"option".concat(t+1),checked:B===t,value:e,readOnly:!0}),o.a.createElement("span",null,e))}))),o.a.createElement("div",{className:"btns-author-container flex space-between align-center"},o.a.createElement("section",{className:"btns grow-3 flex align-center"},o.a.createElement("button",{className:"next-btn",onClick:$},"Next Question"),o.a.createElement(p.b,{className:"quit-btn",to:"/"},"Quit")),o.a.createElement("section",{className:"author flex grow-1 justify-end",title:"Question Author"},o.a.createElement(x,{userID:_})))))},y=a(120),k=a(123),S=a.n(k),q={setup:function(){N=S()("/")},terminate:function(){N=null},on:function(e,t){N.on(e,t)},off:function(e,t){N.off(e,t)},emit:function(e,t){N.emit(e,t)}};var C=a(78),I=a(156);var U=function(e){var t=e.category,a=Object(l.useContext)(b.a).loggedInUser,n=Object(l.useState)(""),c=Object(s.a)(n,2),r=c[0],u=c[1],i=Object(y.useStateIfMounted)([]),m=Object(s.a)(i,2),f=m[0],p=m[1],E=Object(C.a)(),O=E.register,j=E.handleSubmit,v=Object(l.useRef)(null);return Object(l.useEffect)((function(){return q.setup(),function(){return q.terminate()}}),[]),Object(l.useEffect)((function(){!function(){if(a&&t){p([]);var e=a.name,n=t;q.emit("joinRoom",{username:e,room:n})}}()}),[a,t]),Object(l.useEffect)((function(){a&&q.on("chat newMsg",(function(e){p([].concat(Object(g.a)(f),[e]))}))}),[r]),Object(l.useEffect)((function(){v.current.scrollTo({top:v.current.offsetTop})}),[f]),o.a.createElement("div",{className:"live-chat flex flex-column space-between"},o.a.createElement("section",{className:"msgs-container",ref:v},f.map((function(e,t){var a=e.imgUrl,n=e.username,c=e.txt,r=e.time;return o.a.createElement("section",{className:"msg-container flex align-center",key:t},o.a.createElement("section",{className:"img-container"},o.a.createElement("img",{src:a,alt:"User"})),o.a.createElement("div",null,o.a.createElement("section",{className:"from-details flex"},o.a.createElement("p",{className:"username"},n),o.a.createElement("small",{className:"time"},r)),o.a.createElement("section",{className:"msg"},o.a.createElement("p",{className:"txt"},c))))}))),o.a.createElement("form",{className:"flex space-evenly align-center",onSubmit:j((function(e){var t={txt:e.msg,imgUrl:a.imgUrl};q.emit("chat newMsg",t),u("")}))},o.a.createElement("input",{type:"text",placeholder:"Type a message",value:r,name:"msg",ref:O,onChange:function(e){return u(e.target.value)},autoComplete:"off",required:!0}),o.a.createElement("button",{className:"flex align-center"},o.a.createElement(I.a,{title:"Send message"}))))},z=a(23),L=a.n(z);var Q=function(e){var t=e.quiz,a=e.answers,n=Object(l.useContext)(b.a),u=n.loggedInUser,m=n.updateUser,g=Object(l.useState)([]),O=Object(s.a)(g,2),v=O[0],d=O[1],h=Object(l.useState)(""),N=Object(s.a)(h,2),w=N[0],y=N[1],k=Object(l.useState)(""),S=Object(s.a)(k,2),q=S[0],C=S[1],I=Object(l.useState)([]),U=Object(s.a)(I,2),z=U[0],Q=U[1],D=Object(l.useState)(!1),A=Object(s.a)(D,2),P=A[0],J=A[1];return Object(l.useEffect)((function(){var e=i.load("".concat(t.category.toLowerCase(),"Answers")).map((function(e){return(e+1).toString()}));d(e)}),[t.category]),Object(l.useEffect)((function(){if(0!==v.length){!function(){var e=[];v.forEach((function(n,c){a[c]!==n&&e.push(t.questions[c])})),0===e.length&&L.a.fire("Great Job!","Perfect quiz!","success"),Q(e),y("".concat(a.length-e.length,"/").concat(a.length)),0===e.length?C(25*a.length):C(25*(a.length-e.length))}()}}),[v,a,t.questions]),Object(l.useEffect)((function(){i.remove("".concat(t.category.toLowerCase(),"Answers"))}),[z,t.category]),Object(l.useEffect)((function(){""!==q&&function(){var e=Object(r.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.a)(Object(f.a)({},u),{},{points:u.points+q}),0!==z.length||a.knowledge.some((function(e){return e.category===t.category}))||a.knowledge.push({category:t.category,badge:t.imgUrl}),e.next=4,m(a);case 4:J(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[q,t.category,z.length]),o.a.createElement("div",{className:"quiz-conclusion flex flex-column"},o.a.createElement("p",{className:"title"},"Quiz Conclusion"),o.a.createElement("section",{className:"flex flex-column space-between"},o.a.createElement("div",{className:"stats-wrapper flex space-evenly align-center"},o.a.createElement("section",{className:"user-preview"},P&&o.a.createElement(x,{userID:u._id,title:"Your profile"})),o.a.createElement("section",{className:"score-container flex flex-column align-center"},o.a.createElement("span",null,"Your score "),o.a.createElement("span",{className:"score"},w)),o.a.createElement("section",{className:"user-reward flex flex-column align-center"},o.a.createElement("span",null,"Your reward "),o.a.createElement("div",{className:"points"},o.a.createElement("img",{src:j.a,alt:"Points"}),o.a.createElement("span",{className:"reward"},q)))),o.a.createElement("section",{className:"wrong-questions"},o.a.createElement("p",{className:"wrong-quest-header"},"Wrong Questions:"),z.length>0?z.map((function(e){var t=e.question,a=e.id,n=e.code,c=e.authorID;return o.a.createElement("section",{className:"question-container flex flex-column",key:a},o.a.createElement("section",{className:"question"},t),n&&o.a.createElement("section",{className:"question-code"},o.a.createElement(E.a,{code:n})),P&&o.a.createElement("div",{className:"user-preview-wrapper",title:"Author"},o.a.createElement(x,{userID:c})))})):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"None, GOOD JOB!",o.a.createElement("span",{role:"img","aria-label":"Celebrate"},"\ud83e\udd73")),o.a.createElement("section",{className:"badge-container flex align-center justify-center"},o.a.createElement("span",null,"New badge: "),o.a.createElement("img",{src:t.imgUrl,alt:"Badge"}))))),o.a.createElement(p.b,{to:"/",className:"homepage-btn self-center"},"Back to homepage"))},D=a(161);t.default=function(){var e=Object(l.useContext)(m.a),t=e.loadQuiz,a=e.currQuiz,n=Object(l.useState)([]),f=Object(s.a)(n,2),g=f[0],p=f[1],b=Object(l.useState)(!1),E=Object(s.a)(b,2),O=E[0],j=E[1],v=Object(l.useState)([]),d=Object(s.a)(v,2),x=d[0],h=d[1],N=Object(l.useState)(0),y=Object(s.a)(N,2),k=y[0],S=y[1],q=Object(l.useState)(0),C=Object(s.a)(q,2),I=C[0],z=C[1],L=Object(u.f)(),A=Object(u.g)();return Object(l.useEffect)((function(){(function(){var e=Object(r.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.category,e.next=3,t(a);case 3:null===e.sent&&L.push("/err-page");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(l.useEffect)((function(){if(a){p(a.questions);var e=a.questions.map((function(e){return e.correctAns}));h(e)}}),[a]),o.a.createElement("div",{className:"quiz-page container"},a?o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,o.a.createElement("h1",null,a.category),o.a.createElement("section",{className:"progress-container flex align-center"},o.a.createElement(D.a,{className:"progress-bar",percent:I,strokeWidth:"2",strokeColor:"#fd6585",trailWidth:"1"}),o.a.createElement("p",{className:"progress-str"},I,"%"))),o.a.createElement("main",null,O?o.a.createElement(Q,{quiz:a,answers:x,likes:k}):o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{questions:g,category:a.category,onProgress:function(e){var t=e+1,a=Math.floor(t/g.length*100);z(a)},onFinish:function(e){S(e);var t=a.category.toLowerCase();i.store(t+"CurrQuestionIdx",0),j(!0)}}),o.a.createElement(U,{category:a.category})))):o.a.createElement("p",null,"Loading..."))}},75:function(e,t,a){e.exports=a.p+"static/media/trophy.2e6afe68.svg"},77:function(e,t,a){e.exports=a.p+"static/media/like.51343e1f.svg"},80:function(e,t,a){"use strict";var n=a(1),c=a.n(n),r=a(115),s=a(95);t.a=function(e){var t=e.code;return c.a.createElement(r.a,Object.assign({},r.b,{theme:s.a,code:t,language:"jsx"}),(function(e){e.className;var t=e.style,a=e.tokens,n=e.getLineProps,r=e.getTokenProps;return c.a.createElement("pre",{className:"code-snippet",style:t},a.map((function(e,t){return c.a.createElement("div",n({line:e,key:t}),e.map((function(e,t){return c.a.createElement("span",r({token:e,key:t}))})))})))}))}}}]);
//# sourceMappingURL=9.9a3854f7.chunk.js.map